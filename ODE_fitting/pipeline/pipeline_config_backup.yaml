# =============================================================================
# Pipeline configuration (ABM grid + sweep + multi-model ODE fitting)
# =============================================================================

results_root: "pipeline_results"

abm:
  n_runs: 100
  n_workers: 8
  seed: 42
  defaults_yaml: "scripts/scripts_defaults.yaml"
  background_dir: "background"

# Optional explicit scenarios (kept for backwards compatibility)
# abm_sweep:
#   - mode: singletons_phase2_fit71plus
#     abm_params: {}

# Parameter GRID (automatically expanded to all Cartesian combinations)
abm_grid:
  - modes: [data_t71_phase2]
    # base_params:
    #   initial_singleton_count: 800
    overrides:
      phenotypes.proliferative.fragment_rate: [0.0008, 0.08]
      phenotypes.proliferative.prolif_rate: [0.0022, 0.011, 0.055]
      merge.p_merge: [0.56, 0.9]



      # movement_v2.phase2.speed_dist.params.a: [1.5, 2.0, 3.0]
      # movement_v2.phase2.speed_dist.params.scale: [2.5, 3.5, 4.5]
      # movement_v2.phase2.speed_dist.params.kappa: [0.15, 0.5]

# --------------------------- MCMC (unchanged) ---------------------------
mcmc:
  chunk: 10000
  print_every: 2000
  rhat_threshold: 1.05
  max_total_iters: 500000
  burn_in_fraction: 0.5
  nsamples_ppc: 300
  random_seed: 123

# --------------------------- MODELS (unchanged) --------------------------
models:
  - no_prolif_no_shed
  # - no_prolif_cst_shed
  # - no_prolif_SA_shed
  # - no_prolif_Cell_num_shed
  # - cst_prolif_no_shed
  # - cst_prolif_cst_shed
  # - cst_prolif_SA_shed
  # - cst_prolif_Cell_num_shed
  # - SA_prolif_no_shed
  # - SA_prolif_cst_shed
  # - SA_prolif_SA_shed
  # - SA_prolif_Cell_num_shed
  - Cell_num_prolif_no_shed
  - Cell_num_prolif_cst_shed
  # - Cell_num_prolif_SA_shed
  # - Cell_num_prolif_Cell_num_shed

# ------------------------ MODELS META (unchanged) ------------------------
models_meta:
  no_prolif_no_shed:
    param_names: ["b", "N_0"]
    priors: [[0.0, 1.0e-2], [1.0, 4000.0]]
    initial: [3.0e-4, 900.0]
  no_prolif_cst_shed:
    param_names: ["b", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-4, 900.0]
  no_prolif_SA_shed:
    param_names: ["b", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-4, 900.0]
  no_prolif_Cell_num_shed:
    param_names: ["b", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-4, 900.0]
  cst_prolif_no_shed:
    param_names: ["b", "p", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 900.0]
  cst_prolif_cst_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  cst_prolif_SA_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  cst_prolif_Cell_num_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  SA_prolif_no_shed:
    param_names: ["b", "p", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 900.0]
  SA_prolif_cst_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  SA_prolif_SA_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  SA_prolif_Cell_num_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  Cell_num_prolif_no_shed:
    param_names: ["b", "p", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [1.0, 4000.0]]
    initial: [4.0e-4, 1.0e-2, 500.0]
  Cell_num_prolif_cst_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  Cell_num_prolif_SA_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]
  Cell_num_prolif_Cell_num_shed:
    param_names: ["b", "p", "s", "N_0"]
    priors: [[0.0, 1.0e-2], [0.0, 5.0e-2], [0.0, 1.0e-1], [1.0, 4000.0]]
    initial: [3.0e-4, 1.0e-3, 1.0e-4, 900.0]